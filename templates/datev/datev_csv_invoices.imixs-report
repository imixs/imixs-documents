<?xml version="1.0" encoding="UTF-8" standalone="yes"?><document xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xs="http://www.w3.org/2001/XMLSchema"><item name="$created"><value xsi:type="xs:dateTime">2025-02-05T15:38:41.306Z</value></item><item name="$file"><value xsi:nil="true"/></item><item name="$isauthor"><value xsi:type="xs:boolean">true</value></item><item name="$modified"><value xsi:type="xs:dateTime">2025-02-11T20:34:18.323Z</value></item><item name="$snapshot.history"><value xsi:type="xs:int">1</value></item><item name="$snapshot.overwritefilecontent"><value xsi:type="xs:string"></value></item><item name="$snapshotid"><value xsi:type="xs:string">93f99fe8-96e9-4b7e-80d4-995bb2266b43-1739306058324</value></item><item name="$uniqueid"><value xsi:type="xs:string">93f99fe8-96e9-4b7e-80d4-995bb2266b43</value></item><item name="$version"><value xsi:type="xs:int">8</value></item><item name="attributes"><value xsi:type="xmlItem"><value xsi:type="xs:string">$uniqueid</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$modified</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$workflowgroup</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$processid</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_subject</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_invoicenumber</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_invoicedate</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_amount_brutto</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_kreditor_konto</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_currency</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_invoicedate</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_accountingdate</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_datev_client_id</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_datev_fiscal_start</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_costcentre1</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_childitems</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_description</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$file</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$snapshotid</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_datev_sachkontennummernlaenge</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_datev_description</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">$uniqueidref</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value><value xsi:type="xmlItem"><value xsi:type="xs:string">_datev_consultant_id</value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value><value xsi:type="xs:string"></value></value></item><item name="contenttype"><value xsi:type="xs:string"></value></item><item name="encoding"><value xsi:type="xs:string">UTF-8</value></item><item name="txtdescription"><value xsi:type="xs:string">DATEV export executed by teh DatevScheduler. See the XSL definition for details.   </value></item><item name="txtname"><value xsi:type="xs:string">datev_csv_invoices</value></item><item name="txtquery"><value xsi:type="xs:string"></value></item><item name="type"><value xsi:type="xs:string">ReportEntity</value></item><item name="xsl"><value xsi:type="xs:string">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;&#13;
&lt;xsl:stylesheet&#13;
	xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0"&gt;&#13;
&#13;
	&lt;xsl:output method="text" indent="no" byte-order-mark="yes" encoding="UTF-8"&#13;
		omit-xml-declaration="yes" /&gt;&#13;
	&lt;xsl:strip-space elements="*" /&gt;&#13;
	&lt;xsl:template match="/"&gt;&#13;
&#13;
		&lt;xsl:apply-templates&#13;
			select="/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'DATEV-Export']" /&gt;&#13;
	&#13;
&#13;
	&lt;xsl:apply-templates&#13;
			select="/data/document[normalize-space(item[@name = '$workflowgroup']/value) != 'DATEV-Export']" /&gt;&#13;
	&lt;/xsl:template&gt;&#13;
&#13;
&#13;
	&lt;!-- This template builds datev header info --&gt;&#13;
	&lt;xsl:template&#13;
		match="/data/document[normalize-space(item[@name = '$workflowgroup']/value) = 'DATEV-Export']"&gt;&#13;
&#13;
		&lt;xsl:variable name="date" select="item[@name='$modified']/value" /&gt;&#13;
		&lt;xsl:variable&#13;
			name="stapelstart" select="item[@name='datev.stapelzeitraum.start']/value" /&gt;&#13;
		&lt;xsl:variable&#13;
			name="stapelende" select="item[@name='datev.stapelzeitraum.ende']/value" /&gt;&#13;
		&lt;xsl:variable&#13;
			name="fiscalstart" select="item[@name='datev.fiscal_start']/value" /&gt;&#13;
&#13;
&#13;
		&lt;!-- Header --&gt;&#13;
&lt;xsl:text&gt;"EXTF";510;21;"Buchungsstapel";7;&lt;/xsl:text&gt;&#13;
&lt;xsl:value-of&#13;
			select="format-dateTime($date, '[Y0001][M01][D01][H01][m01][s01][f001]')"&gt;&lt;/xsl:value-of&gt;&#13;
&lt;xsl:text&gt;;;"RE";"ImixsWorkflow";"";&lt;/xsl:text&gt;&#13;
&lt;xsl:value-of&#13;
			select="item[@name='datev.consultant.id']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
&lt;xsl:value-of&#13;
			select="item[@name='datev.client.id']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
&lt;xsl:value-of&#13;
			select="$fiscalstart"&gt;&lt;/xsl:value-of&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
		&lt;!-- Sachkontennumernlaenge mandantenabhaengig - defautl = 6 --&gt;&#13;
&lt;xsl:choose&gt;&#13;
			&lt;xsl:when test="string-length(./item[@name='datev.sachkontennummernlaenge']/value) &gt; 0"&gt;&#13;
				&lt;xsl:value-of select="item[@name='datev.sachkontennummernlaenge']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;/xsl:when&gt;&#13;
			&lt;xsl:otherwise&gt;&#13;
				&lt;xsl:text&gt;6;&lt;/xsl:text&gt;&#13;
			&lt;/xsl:otherwise&gt;&#13;
		&lt;/xsl:choose&gt;&#13;
&lt;xsl:value-of&#13;
			select="format-dateTime($stapelstart, '[Y0001][M01][D01]')" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
&lt;xsl:value-of&#13;
			select="format-dateTime($stapelende, '[Y0001][M01][D01]')" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;"&lt;/xsl:text&gt;&lt;xsl:value-of&#13;
			select="concat('Rechnungen ',format-dateTime($date, '[D01][M01]'))" /&gt;&lt;xsl:text&gt;"&lt;/xsl:text&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;"";1;0;0;;;;;;;;;"";""&lt;/xsl:text&gt;&#13;
&#13;
&lt;xsl:text&gt;&amp;#xa;&lt;/xsl:text&gt;&#13;
&#13;
&lt;xsl:text&gt;Umsatz (ohne Soll-/Haben-Kennzeichen);Soll-/Haben-Kennzeichen;WKZ Umsatz;Kurs;Basisumsatz;WKZ Basisumsatz;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Konto;Gegenkonto(ohne BU-Schlüssel);BU-Schlüssel;Belegdatum;Belegfeld 1;Belegfeld 2;Skonto;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Buchungstext;Postensperre;Diverse Adressnummer;Geschäftspartnerbank;Sachverhalt;Zinssperre;Beleglink;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 1;Beleginfo – Inhalt 1;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 2;Beleginfo – Inhalt 2;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 3;Beleginfo – Inhalt 3;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 4;Beleginfo – Inhalt 4;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 5;Beleginfo – Inhalt 5;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 6;Beleginfo – Inhalt 6;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 7;Beleginfo – Inhalt 7;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Beleginfo – Art 8;Beleginfo – Inhalt 8;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;KOST1 – Kostenstelle;KOST2 – Kostenstelle;KOST-Menge;EU-Mitgliedstaat u. USt-IdNr.;EU-Steuersatz;Abw. Versteuerungsart;Sachverhalt L+L;Funktionsergänzung L+L;BU 49 Hauptfunktionstyp;BU 49 Hauptfunktionsnummer;BU 49 Funktionsergänzung;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 1;Zusatzinformation – Inhalt 1;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 2;Zusatzinformation – Inhalt 2;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 3;Zusatzinformation – Inhalt 3;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 4;Zusatzinformation – Inhalt 4;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 5;Zusatzinformation – Inhalt 5;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 6;Zusatzinformation – Inhalt 6;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 7;Zusatzinformation – Inhalt 7;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 8;Zusatzinformation – Inhalt 8;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 9;Zusatzinformation – Inhalt 9;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 10;Zusatzinformation – Inhalt 10;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 11;Zusatzinformation – Inhalt 11;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 12;Zusatzinformation – Inhalt 12;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 13;Zusatzinformation – Inhalt 13;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 14;Zusatzinformation – Inhalt 14;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 15;Zusatzinformation – Inhalt 15;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 16;Zusatzinformation – Inhalt 16;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 17;Zusatzinformation – Inhalt 17;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 18;Zusatzinformation – Inhalt 18;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 19;Zusatzinformation – Inhalt 19;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Zusatzinformation – Art 20;Zusatzinformation – Inhalt 20;&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;Stück;Gewicht;Zahlweise;Forderungsart;Veranlagungsjahr;Zugeordnete Fälligkeit;Skontotyp;Auftragsnummer;Buchungstyp;USt-Schlüssel (Anzahlungen);EU-Mitgliedstaat (Anzahlungen);Sachverhalt L+L (Anzahlungen):&lt;/xsl:text&gt;&#13;
&lt;xsl:text&gt;EU-Steuersatz (Anzahlungen);Erlöskonto (Anzahlungen);Herkunft-Kz;Leerfeld;KOST-Datum;SEPA-Mandatsreferenz;Skontosperre;Gesellschaftername;Beteiligtennummer;Identifikationsnummer;Zeichnernummer;Postensperre bis;Bezeichnung SoBil-Sachverhalt;Kennzeichen SoBil-Buchung;Festschreibung;Leistungsdatum;Datum Zuord. Steuerperiode&lt;/xsl:text&gt;&#13;
		&lt;xsl:text&gt;&amp;#xa;&lt;/xsl:text&gt;&#13;
	&lt;/xsl:template&gt;&#13;
&#13;
&#13;
	&lt;!-- This template builds datev body info for each invoice &#13;
	     wir nehmen jedes workitem das kein DATEV-Export ist - also invoices oder Data Export items (IW24&#13;
	repimport) --&gt;&#13;
	&lt;xsl:template&#13;
		match="/data/document[normalize-space(item[@name = '$workflowgroup']/value) != 'DATEV-Export']"&gt;&#13;
&#13;
		&lt;xsl:variable&#13;
			name="belegdatum" select="item[@name='datev.belegdatum']/value" /&gt;  &#13;
		&lt;xsl:variable&#13;
			name="belegfeld1" select="item[@name='datev.belegfeld1']/value" /&gt;&#13;
		&lt;xsl:variable&#13;
			name="gegenkonto" select="item[@name='datev.gegenkonto']/value" /&gt;&#13;
		&lt;xsl:variable&#13;
			name="buchungstext" select="substring(item[@name='$workflowsummary']/value,1,59)" /&gt;&#13;
		&lt;xsl:variable&#13;
			name="uniqueid" select="item[@name='$uniqueid']/value" /&gt;&#13;
		&lt;xsl:for-each&#13;
			select="item[@name='datev.booking.list']/value"&gt;&#13;
			&lt;xsl:variable name="betrag"&#13;
				select="replace(./item[@name='datev.betrag']/value, '\.', ',')" /&gt;&#13;
			&lt;xsl:variable&#13;
				name="abs_betrag" select="replace($betrag, '-', '')" /&gt;&#13;
			&lt;xsl:value-of&#13;
				select="$abs_betrag" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;!-- S / H  --&gt;&#13;
			&lt;xsl:if&#13;
				test="not(starts-with($betrag, '-'))"&gt;&#13;
				&lt;xsl:text&gt;S;&lt;/xsl:text&gt;&#13;
			&lt;/xsl:if&gt;&#13;
			&lt;xsl:if test="(starts-with($betrag, '-'))"&gt;&#13;
				&lt;xsl:text&gt;H;&lt;/xsl:text&gt;&#13;
			&lt;/xsl:if&gt;&#13;
			&lt;xsl:text&gt;;;;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="./item[@name='datev.konto']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="$gegenkonto" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="./item[@name='datev.buschluessel']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="format-dateTime($belegdatum, '[D01][M01]')" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="$belegfeld1" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:text&gt;;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="$buchungstext" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:text&gt;;;;;;&lt;/xsl:text&gt;&#13;
&#13;
			&lt;!-- Beleglink --&gt;		&#13;
			&lt;xsl:text&gt;BEDI "&lt;/xsl:text&gt;&lt;xsl:value-of&#13;
				select="$uniqueid" /&gt;&lt;xsl:text&gt;";&lt;/xsl:text&gt;	 				&#13;
			&lt;xsl:text&gt;;;;;;;;;;;;;;;;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="./item[@name='datev.kostenstelle1']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:value-of&#13;
				select="./item[@name='datev.kostenstelle2']/value" /&gt;&lt;xsl:text&gt;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:text&gt;;;;;;;;;;;;;;;&lt;/xsl:text&gt;&#13;
			&lt;xsl:text&gt;&amp;#xa;&lt;/xsl:text&gt;&#13;
		&lt;/xsl:for-each&gt;&#13;
	&lt;/xsl:template&gt;&#13;
&lt;/xsl:stylesheet&gt;</value></item><item name="xslresource"><value xsi:type="xs:string">/office-krieger/src/reports/DATEV/datev_csv_invoices-1.7.xsl</value></item></document>